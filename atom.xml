<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Pony's Stable]]></title>
  <link href="http://chienlima.github.io/atom.xml" rel="self"/>
  <link href="http://chienlima.github.io/"/>
  <updated>2015-05-16T16:24:34+08:00</updated>
  <id>http://chienlima.github.io/</id>
  <author>
    <name><![CDATA[Chienli Ma]]></name>
    <email><![CDATA[maqianlie@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[First Gift From Google]]></title>
    <link href="http://chienlima.github.io/blog/2015/05/16/first-gift-from-google/"/>
    <updated>2015-05-16T16:12:52+08:00</updated>
    <id>http://chienlima.github.io/blog/2015/05/16/first-gift-from-google</id>
    <content type="html"><![CDATA[<p>Several days a ago, I reveived a Fedex package. When I opened it &hellip; Bomb!</p>

<p>Payoneer pre-paid MasterCard with google icon!</p>

<p><img src="http://chienlima.github.io/images/GSoCMasterCard.jpg" width="512" height="512" title="image" alt="images"></p>

<p>Good looking card. I guass someone will regret for using existing bank account. Also this is my first own credit card. Finally I can make payment without a phone from my dad :)</p>

<p>Google is ready to pay me now. &ldquo;Are you OK?&rdquo;( A jokes about Lei Jun from Xiaomi )</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[First Look Into Theano Core]]></title>
    <link href="http://chienlima.github.io/blog/2015/05/07/first-look-into-theano-core/"/>
    <updated>2015-05-07T11:08:32+08:00</updated>
    <id>http://chienlima.github.io/blog/2015/05/07/first-look-into-theano-core</id>
    <content type="html"><![CDATA[<p>It&rsquo;s been a week and a half since google-melange anounced the accepted student for google summer of code. I was luckcy enough to be accepted by Theano &ndash; sub-foundation of Python organization, to help them add new features: Allow user to modify compiled function. As scheduled, from 27th April to 23rd May is the community bounding period. During these days I ought to get familiar with Theano core code and Theano dev community.</p>

<p>Before the application started, I&rsquo;ve dived into Theano cored and got the basic idea of what I&#8217;am going to do. However, to make the idea more clear and to fit the requirement that student should post every week about their progress. I decide to write two post about Theano core &ndash; about how theano work. This is the first post. This post will talk about what is a function? And how a function is generate.</p>

<h2>How a function is generated?</h2>

<p> Just recall how we compiled a function <code>func = theano.function( [ inputs ], output )</code>, we can know that we should start out journey from method  <code>function()</code>, which locates in  <code>theano/compile/founction.py</code>.<br/>
 In method <code>function()</code>, after some data verification, it will call <code>orig_func()</code> or <code>pfunc()</code> which return a <code>function</code> that user will get. Since <code>pfunc()</code> will also call <code>orig_func()</code>, we are going to look into <code>pfunc()</code> first.</p>

<h3>pfunc.py</h3>

<p> <code>pfunc()</code> have two major tasks:</p>

<ul>
<li>Transfer input_variable into <code>In()</code> instances. So does <code>shared_variable</code>. ( In function graph,  SharedVariabls are treated as input, updates are treated as output ).</li>
<li>Rebuild computational graph using <code>updates</code> and <code>inputs</code>, transform output into <code>Out</code>  instances.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">pfunc</span><span class="p">(</span> <span class="o">...</span> <span class="n">some</span> <span class="n">arguments</span> <span class="o">...</span> <span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Clones the replacements named in the givens argument, and points each Var1 to</span>
</span><span class='line'>    <span class="c"># the clone of Var2.</span>
</span><span class='line'>    <span class="c"># Transform params into theano.compile.In objects.</span>
</span><span class='line'>    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">_pfunc_param_to_in</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">allow_downcast</span><span class="o">=</span><span class="n">allow_input_downcast</span><span class="p">)</span>
</span><span class='line'>                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">params</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#  clones the outputs and the update expressions.  This rebuilds a computation graph</span>
</span><span class='line'>    <span class="c"># from the inputs and the givens. ( Irrelative to me. Pass )</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">output_vars</span> <span class="o">=</span> <span class="n">rebuild_collect_shared</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span>
</span><span class='line'>                                             <span class="n">in_variables</span><span class="p">,</span>
</span><span class='line'>                                             <span class="n">replace</span><span class="o">=</span><span class="n">givens</span><span class="p">,</span>
</span><span class='line'>                                             <span class="n">updates</span><span class="o">=</span><span class="n">updates</span><span class="p">,</span>
</span><span class='line'>                                             <span class="n">rebuild_strict</span><span class="o">=</span><span class="n">rebuild_strict</span><span class="p">,</span>
</span><span class='line'>                                             <span class="n">copy_inputs_over</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
</span><span class='line'>                                             <span class="n">no_default_updates</span><span class="o">=</span><span class="n">no_default_updates</span><span class="p">)</span>
</span><span class='line'>    <span class="c"># extracting the arguments</span>
</span><span class='line'>    <span class="n">input_variables</span><span class="p">,</span> <span class="n">cloned_outputs</span><span class="p">,</span> <span class="n">other_stuff</span> <span class="o">=</span> <span class="n">output_vars</span>
</span><span class='line'>    <span class="n">clone_d</span><span class="p">,</span> <span class="n">update_d</span><span class="p">,</span> <span class="n">update_expr</span><span class="p">,</span> <span class="n">shared_inputs</span> <span class="o">=</span> <span class="n">other_stuff</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">iv</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">input_variables</span><span class="p">):</span>
</span><span class='line'>        <span class="n">i</span><span class="o">.</span><span class="n">variable</span> <span class="o">=</span> <span class="n">iv</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">sv</span> <span class="ow">in</span> <span class="n">shared_inputs</span><span class="p">:</span>
</span><span class='line'>        <span class="c"># pass value of None here</span>
</span><span class='line'>        <span class="c"># value will be stored in the resulting functions&#39; defaults list</span>
</span><span class='line'>        <span class="c"># but since the value of shared variables never needs to be refed, it is not needed</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">sv</span> <span class="ow">in</span> <span class="n">update_d</span><span class="p">:</span>
</span><span class='line'>            <span class="n">si</span> <span class="o">=</span> <span class="n">In</span><span class="p">(</span><span class="n">variable</span><span class="o">=</span><span class="n">sv</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">sv</span><span class="o">.</span><span class="n">container</span><span class="p">,</span> <span class="n">mutable</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
</span><span class='line'>                    <span class="n">borrow</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="n">update_d</span><span class="p">[</span><span class="n">sv</span><span class="p">],</span> <span class="n">shared</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">si</span> <span class="o">=</span> <span class="n">In</span><span class="p">(</span><span class="n">variable</span><span class="o">=</span><span class="n">sv</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">sv</span><span class="o">.</span><span class="n">container</span><span class="p">,</span>
</span><span class='line'>                    <span class="n">mutable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">borrow</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">shared</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>        <span class="n">inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">si</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">orig_function</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">cloned_outputs</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span>
</span><span class='line'>            <span class="n">accept_inplace</span><span class="o">=</span><span class="n">accept_inplace</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span>
</span><span class='line'>            <span class="n">on_unused_input</span><span class="o">=</span><span class="n">on_unused_input</span><span class="p">,</span> <span class="n">output_keys</span><span class="o">=</span><span class="n">output_keys</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>orig_func():</h3>

<p>Now it time for a look into <code>orig_func()</code>.  <code>orig_func()</code> will again makes sure that inputs and outputs are transformed into <code>In</code> an <code>Out</code>. And then it will use <code>create</code> method in <code>FunctionMaker</code> to make a function, which will be return.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">orig_function</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">accept_inplace</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
</span><span class='line'>                  <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">on_unused_input</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
</span><span class='line'>                  <span class="n">output_keys</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># conver input variable into instances of In() instances</span>
</span><span class='line'>    <span class="n">inputs</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">convert_function_input</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># so do outputs</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">outputs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
</span><span class='line'>            <span class="n">outputs</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">FunctionMaker</span><span class="o">.</span><span class="n">wrap_out</span><span class="p">,</span> <span class="n">outputs</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">outputs</span> <span class="o">=</span> <span class="n">FunctionMaker</span><span class="o">.</span><span class="n">wrap_out</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># In()s and Out()s will be passed into FunctionMaker and a function will be create from it by calling create() method.</span>
</span><span class='line'>    <span class="n">fn</span> <span class="o">=</span> <span class="n">Maker</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span>
</span><span class='line'>                   <span class="n">outputs</span><span class="p">,</span>
</span><span class='line'>                   <span class="n">mode</span><span class="p">,</span>
</span><span class='line'>                   <span class="n">accept_inplace</span><span class="o">=</span><span class="n">accept_inplace</span><span class="p">,</span>
</span><span class='line'>                   <span class="n">profile</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span>
</span><span class='line'>                   <span class="n">on_unused_input</span><span class="o">=</span><span class="n">on_unused_input</span><span class="p">,</span>
</span><span class='line'>                   <span class="n">output_keys</span> <span class="o">=</span> <span class="n">output_keys</span><span class="p">)</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span class='line'>                       <span class="n">defaults</span><span class="p">)</span>         <span class="c">#     ^^^^ </span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>FunctionMaker:</h3>

<p> <code>FunctionMaker.__init()__</code> is where <code>fgraph</code> is extracted and optimized. <code>FuncitonMaker.create()</code> is where <code>function</code> will be compiled and linked. In fact, <code>FunctionMaker.linker.make_thunk()</code> is where <code>function</code> is linked.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">FunctionMaker</span><span class="p">:</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="o">...</span><span class="n">args</span><span class="o">...</span> <span class="p">):</span>
</span><span class='line'>        <span class="c"># again, make sure that input/output are tranformed into In and Out</span>
</span><span class='line'>        <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wrap_in</span><span class="p">,</span> <span class="n">inputs</span><span class="p">),</span> <span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wrap_out</span><span class="p">,</span> <span class="n">outputs</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># ???</span>
</span><span class='line'>        <span class="n">_inputs</span> <span class="o">=</span> <span class="n">gof</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">inputs</span><span class="p">([</span><span class="n">o</span><span class="o">.</span><span class="n">variable</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">outputs</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">update</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">inputs</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s">&#39;update&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)])</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># make indices ... which is useless</span>
</span><span class='line'>        <span class="n">indices</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">input</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">expand_in</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">_inputs</span><span class="p">)</span> <span class="k">for</span> <span class="nb">input</span> <span class="ow">in</span> <span class="n">inputs</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># get fgraph</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">fgraph</span> <span class="ow">is</span> <span class="n">Node</span><span class="p">:</span>
</span><span class='line'>            <span class="n">fgraph</span><span class="p">,</span> <span class="n">additional_outputs</span> <span class="o">=</span> <span class="n">std_fgraph</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">,</span> <span class="n">accept_inplace</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">_</span><span class="p">,</span> <span class="n">additional_outputs</span> <span class="o">=</span> <span class="n">std_fgraph</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">,</span> <span class="n">accept_inplace</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">fgraph</span> <span class="o">=</span> <span class="n">fgraph</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># fetch optimizor and linker</span>
</span><span class='line'>        <span class="n">optimizer</span><span class="p">,</span> <span class="n">linker</span> <span class="o">=</span> <span class="n">mode</span><span class="o">.</span><span class="n">optimizer</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">mode</span><span class="o">.</span><span class="n">linker</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># optimize fgraph</span>
</span><span class='line'>        <span class="c"># if need_opt:</span>
</span><span class='line'>            <span class="c"># optimization code here</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># linker accept fgraph </span>
</span><span class='line'>        <span class="k">if</span> <span class="n">no_borrow</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">linker</span> <span class="o">=</span> <span class="n">linker</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="n">fgraph</span><span class="p">,</span> <span class="n">no_recycling</span><span class="o">=</span><span class="n">infer_reuse_pattern</span><span class="p">(</span><span class="n">fgraph</span><span class="p">,</span> <span class="n">no_borrow</span><span class="p">))</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">linker</span> <span class="o">=</span> <span class="n">linker</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="n">fgraph</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">linker</span><span class="p">,</span> <span class="s">&#39;accept_var_updates&#39;</span><span class="p">):</span>
</span><span class='line'>            <span class="c"># hacky thing so VMLinker knows about updates</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">linker</span><span class="o">.</span><span class="n">accept_var_updates</span><span class="p">(</span>
</span><span class='line'>                    <span class="n">fgraph_updated_vars</span><span class="p">(</span><span class="n">fgraph</span><span class="p">,</span> <span class="n">inputs</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># some other configeration here</span>
</span><span class='line'>        <span class="c"># ...</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_storage</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">trustme</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">    Create a function.</span>
</span><span class='line'>
</span><span class='line'><span class="sd">    Input storage is the &#39;value&#39; attribute of each In instances</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># construct input_storage_list and default list</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">((</span><span class="nb">input</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">subinputs</span><span class="p">),</span> <span class="n">input_storage_i</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">,</span> <span class="n">input_storage</span><span class="p">)):</span>
</span><span class='line'>            <span class="c"># a lot of codes here.</span>
</span><span class='line'>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">        Q: What&#39;s indices?</span>
</span><span class='line'><span class="sd">        List of (SymbolicInput, incide, [SymbolicInput..]). The first one is the </span>
</span><span class='line'><span class="sd">        input vaiable; the incide is the index of the input in the input list; </span>
</span><span class='line'><span class="sd">        the [SymIn...] the relevant input(?); </span>
</span><span class='line'><span class="sd">        According to the document, the last two is deprecated. So it can be regarded as list of SymbolicInput.</span>
</span><span class='line'><span class="sd">    </span>
</span><span class='line'><span class="sd">        Q: What&#39;s defaults?</span>
</span><span class='line'><span class="sd">        A: List of 3-tuples. Each tuple corresponds to one input_storage. </span>
</span><span class='line'><span class="sd">        ( </span>
</span><span class='line'><span class="sd">          Bool: Is this input required at each function call?,  </span>
</span><span class='line'><span class="sd">          Bool: Should this inputs value be reverted to default value after each call? </span>
</span><span class='line'><span class="sd">          AnyType: The value(storage) associated with this input.</span>
</span><span class='line'><span class="sd">        )</span>
</span><span class='line'><span class="sd">        &quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># call make_thunk() from linker and get fn</span>
</span><span class='line'>        <span class="k">try</span><span class="p">:</span>
</span><span class='line'>            <span class="n">theano</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">traceback</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>            <span class="n">_fn</span><span class="p">,</span> <span class="n">_i</span><span class="p">,</span> <span class="n">_o</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">linker</span><span class="o">.</span><span class="n">make_thunk</span><span class="p">(</span><span class="n">input_storage</span><span class="o">=</span><span class="n">input_storage_lists</span><span class="p">)</span>
</span><span class='line'>            <span class="c"># ^   ^   ^ =&gt; (function, input_containers, output_containers)</span>
</span><span class='line'>            <span class="c"># where function is a thunk that operates on the returned variables.</span>
</span><span class='line'>            <span class="c"># Because the map_storag() in make_thunk()</span>
</span><span class='line'>            <span class="c"># from here on, the input/output_storage represent all I/O of all relative nodes</span>
</span><span class='line'>            <span class="c"># ALso, storage is container, Instead of SymbolicKit</span>
</span><span class='line'>        <span class="k">finally</span><span class="p">:</span>
</span><span class='line'>            <span class="n">theano</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">traceback</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="n">limit_orig</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># get a function, here function_builder() is the constructor</span>
</span><span class='line'>        <span class="c"># of class Function.</span>
</span><span class='line'>        <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">function_builder</span><span class="p">(</span><span class="n">_fn</span><span class="p">,</span> <span class="n">_i</span><span class="p">,</span> <span class="n">_o</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">indices</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">,</span>
</span><span class='line'>                    <span class="n">defaults</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">unpack_single</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_none</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_keys</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">fn</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>What&rsquo;s <code>theano.function</code>?</h2>

<p>Each function is a callable object.  <code>theano.function</code> is not a python function. Instead, it a class with method <code>__call__()</code>.  Every funciton stores its own fgraph, maker, storages and many other configurations. However, the core of a function is a function <code>fn()</code> returned by <code>linker.make_thunk()</code>. Every time a function is called, it will first verify the input data, and then call <code>self.fn()</code> to get output values.</p>

<hr />

<p>Now I know how is a function borned. Also, I know that to complete my missions, I need to focus more on <code>FunctionMaker</code> and <code>Function</code> rather that <code>orig_func()</code> and <code>pfunc()</code>. However, there still exist some question, such as: What does <code>make_thunk()</code> do? and What is <code>In()</code>, <code>Out()</code> and <code>container</code>? In the next post, I will have a look at this and other relative data structures.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Leetcode battlefield:Start Coding With C++]]></title>
    <link href="http://chienlima.github.io/blog/2015/03/30/leetcode-start-coding-with-c-plus-plus/"/>
    <updated>2015-03-30T00:24:06+08:00</updated>
    <id>http://chienlima.github.io/blog/2015/03/30/leetcode-start-coding-with-c-plus-plus</id>
    <content type="html"><![CDATA[<p>So, the buggy judging system of python is unbearable, therefore I just turned to C++ and expected a better experience. Also, I need to learn  C++ for my future career. So, a good start. This post contains following problems:</p>

<ul>
<li>Reverse words</li>
<li>Eval RPN</li>
<li>Tree Traversal</li>
</ul>


<hr />

<h3>Reverse words</h3>

<p>Before solving this problem I never tried using std::string, I thought string operation in C++ is as hard as C. However, standard library really ease my pains. In fact, with the help of std, I think coding with C++ is much more easier and happier than coding with Ruby and Python now.</p>

<h5>Question:</h5>

<p>Given an input string, reverse the string word by word.</p>

<h5>Basic logic:</h5>

<p>The idea is simple, find each word in the sentence, push then in the stack and pop back after dealing the whole sentence. Be careful to the spaces in the head or tails of the sentence and the repeated spaces.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span><span class='line'><span class="k">public</span><span class="o">:</span>
</span><span class='line'>    <span class="kt">void</span> <span class="n">reverseWords</span><span class="p">(</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">s</span> <span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="c1">// get the words in reverse order</span>
</span><span class='line'>        <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">words</span><span class="p">;</span>
</span><span class='line'>        <span class="n">split</span><span class="p">(</span> <span class="n">s</span><span class="p">,</span> <span class="sc">&#39; &#39;</span><span class="p">,</span> <span class="n">words</span><span class="p">);</span>
</span><span class='line'>        <span class="c1">// reconstruct</span>
</span><span class='line'>        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span> <span class="n">words</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span><span class="k">return</span><span class="p">;</span>
</span><span class='line'>        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">words</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="n">s</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span><span class='line'>            <span class="n">s</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="c1">// delete last space</span>
</span><span class='line'>        <span class="n">s</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">void</span> <span class="n">split</span><span class="p">(</span> <span class="n">string</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">,</span> <span class="kt">char</span> <span class="n">c</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">v</span> <span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="kt">int</span> <span class="n">begin</span><span class="p">,</span> <span class="n">last</span><span class="p">;</span>
</span><span class='line'>        <span class="c1">// first word</span>
</span><span class='line'>        <span class="n">begin</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">-</span><span class="mi">1</span> <span class="p">;</span>
</span><span class='line'>        <span class="n">last</span>  <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">find_last_of</span><span class="p">(</span> <span class="n">c</span><span class="p">,</span> <span class="n">begin</span> <span class="p">);</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span> <span class="n">last</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">begin</span><span class="o">-</span><span class="n">last</span><span class="p">)</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span> <span class="n">last</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">begin</span><span class="o">-</span><span class="n">last</span><span class="p">));</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="c1">// find next words</span>
</span><span class='line'>        <span class="k">while</span><span class="p">(</span> <span class="n">last</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="n">and</span> <span class="n">begin</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="c1">// find a word </span>
</span><span class='line'>            <span class="n">begin</span> <span class="o">=</span> <span class="n">last</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>            <span class="n">last</span>  <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">find_last_of</span><span class="p">(</span> <span class="n">c</span><span class="p">,</span> <span class="n">begin</span> <span class="p">);</span>
</span><span class='line'>            <span class="c1">// if it&#39;s repeated split character, skip it</span>
</span><span class='line'>            <span class="k">while</span><span class="p">(</span> <span class="n">last</span> <span class="o">==</span> <span class="n">begin</span> <span class="p">)</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>                <span class="n">begin</span> <span class="o">=</span> <span class="n">last</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>                <span class="n">last</span>  <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">find_last_of</span><span class="p">(</span> <span class="n">c</span><span class="p">,</span> <span class="n">begin</span> <span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="c1">// skip if is last space</span>
</span><span class='line'>            <span class="k">if</span><span class="p">(</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span> <span class="n">last</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">begin</span><span class="o">-</span><span class="n">last</span><span class="p">)</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>                <span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span> <span class="n">last</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">begin</span><span class="o">-</span><span class="n">last</span><span class="p">));</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>evalRPN</h3>

<h5>Question:</h5>

<p>Evaluate the value of an arithmetic expression in Reverse Polish Notation. For example:
    [&ldquo;2&rdquo;, &ldquo;1&rdquo;, &ldquo;+&rdquo;, &ldquo;3&rdquo;, &ldquo;*&rdquo;] -> ((2 + 1) * 3) -> 9</p>

<h5>Basic logic:</h5>

<p>Also simple idea: Iterater through the list, push numbers to a stack. Everytime we meet operaor, pop top 2 numbers and calculate the result, push the result to the stack. Finally, there will be only one number in the stack, which is the reuslt.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='C++'><span class='line'><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span><span class='line'><span class="k">public</span><span class="o">:</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">evalRPN</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">tokens</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">resultStack</span><span class="p">;</span>
</span><span class='line'>        <span class="n">string</span> <span class="n">symbol</span><span class="p">;</span>
</span><span class='line'>        <span class="kt">int</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">result</span><span class="p">;</span>
</span><span class='line'>        <span class="kt">bool</span> <span class="n">isOperator</span><span class="p">;</span>
</span><span class='line'>        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">tokens</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="n">symbol</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>            <span class="n">isOperator</span> <span class="o">=</span>  <span class="n">symbol</span><span class="o">==</span><span class="s">&quot;+&quot;</span><span class="o">||</span><span class="n">symbol</span><span class="o">==</span><span class="s">&quot;-&quot;</span><span class="o">||</span><span class="n">symbol</span><span class="o">==</span><span class="s">&quot;*&quot;</span><span class="o">||</span><span class="n">symbol</span><span class="o">==</span><span class="s">&quot;/&quot;</span><span class="p">;</span>
</span><span class='line'>            <span class="k">if</span><span class="p">(</span> <span class="o">!</span> <span class="n">isOperator</span> <span class="p">)</span>
</span><span class='line'>                <span class="n">resultStack</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">stoi</span><span class="p">(</span><span class="n">symbol</span><span class="p">));</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>                <span class="n">right</span> <span class="o">=</span> <span class="n">resultStack</span><span class="p">.</span><span class="n">back</span><span class="p">();</span>
</span><span class='line'>                <span class="n">resultStack</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
</span><span class='line'>                <span class="n">left</span> <span class="o">=</span> <span class="n">resultStack</span><span class="p">.</span><span class="n">back</span><span class="p">();</span>
</span><span class='line'>                <span class="n">resultStack</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
</span><span class='line'>                <span class="k">if</span><span class="p">(</span><span class="n">symbol</span><span class="o">==</span><span class="s">&quot;+&quot;</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">result</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="n">right</span><span class="p">;</span>
</span><span class='line'>                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">symbol</span> <span class="o">==</span><span class="s">&quot;-&quot;</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">result</span> <span class="o">=</span> <span class="n">left</span> <span class="o">-</span> <span class="n">right</span><span class="p">;</span>
</span><span class='line'>                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">symbol</span><span class="o">==</span><span class="s">&quot;*&quot;</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">result</span> <span class="o">=</span> <span class="n">left</span> <span class="o">*</span> <span class="n">right</span><span class="p">;</span>
</span><span class='line'>                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">symbol</span><span class="o">==</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">result</span> <span class="o">=</span> <span class="n">left</span> <span class="o">/</span> <span class="n">right</span><span class="p">;</span>
</span><span class='line'>                <span class="k">else</span>
</span><span class='line'>                    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;ERROR&quot;</span><span class="p">;</span>
</span><span class='line'>                <span class="n">resultStack</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">resultStack</span><span class="p">.</span><span class="n">back</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>Tree traversal</h3>

<h5>Basic logic:</h5>

<p>Basic algo. There are 3 kind of traversal method: postorder, preorder and inorder.</p>

<h5>PostOrder</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='c++'><span class='line'><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span><span class='line'><span class="k">public</span><span class="o">:</span>
</span><span class='line'>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">postorderTraversal</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span> <span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">){</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">v</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">else</span><span class="p">{</span>
</span><span class='line'>            <span class="k">if</span><span class="p">(</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="p">){</span>
</span><span class='line'>                <span class="n">travel</span><span class="p">(</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">v</span> <span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">if</span><span class="p">(</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">){</span>
</span><span class='line'>                <span class="n">travel</span><span class="p">(</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">v</span> <span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">v</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="kt">void</span> <span class="n">travel</span><span class="p">(</span> <span class="n">TreeNode</span> <span class="o">*</span><span class="n">node</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">v</span> <span class="p">){</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="p">){</span>
</span><span class='line'>            <span class="n">travel</span><span class="p">(</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">v</span> <span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">){</span>
</span><span class='line'>            <span class="n">travel</span><span class="p">(</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">v</span> <span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h5>PreOrder</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='c++'><span class='line'><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span><span class='line'><span class="k">public</span><span class="o">:</span>
</span><span class='line'>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">preorderTraversal</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">root</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span> <span class="n">root</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="p">){</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">v</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="p">){</span>
</span><span class='line'>            <span class="n">travel</span><span class="p">(</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">v</span> <span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="p">){</span>
</span><span class='line'>            <span class="n">travel</span><span class="p">(</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">v</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">void</span> <span class="n">travel</span><span class="p">(</span><span class="n">TreeNode</span> <span class="o">*</span><span class="n">node</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">v</span><span class="p">){</span>
</span><span class='line'>        <span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span> <span class="p">){</span>
</span><span class='line'>            <span class="n">travel</span><span class="p">(</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span> <span class="n">v</span> <span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span> <span class="p">){</span>
</span><span class='line'>            <span class="n">travel</span><span class="p">(</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Leetcode battlefield:Some Python Codes]]></title>
    <link href="http://chienlima.github.io/blog/2015/03/30/leetcode-some-python-codes/"/>
    <updated>2015-03-30T00:22:37+08:00</updated>
    <id>http://chienlima.github.io/blog/2015/03/30/leetcode-some-python-codes</id>
    <content type="html"><![CDATA[<p>I collected a bunches of leetcode code solutions and now put them in one post. This post contains the following questions:</p>

<pre><code>* BST Iterator
* Factorial Trailing Zeros
* Excel number
* Decimal
* Find Peak Element
* Min stack
* Majority elements
* Trailing zeros
* Tree Travel
</code></pre>

<p>Also, after realing leetcode online judge have numerous bug in python test case, I decided to turn to C++. So, here comes the solutions.</p>

<hr />

<h3>BST Iterator</h3>

<h5>Question:</h5>

<p>Implement an iterator over a binary search tree (BST). Your iterator will be initialized with the root node of a BST.
Calling <code>next()</code> will return the next smallest number in the BST.
Note: <code>next()</code> and <code>hasNext()</code> should run in average <code>O(1)</code> time and uses <code>O(h)</code> memory, where h is the height of the tree.</p>

<h5>Basic logic:</h5>

<p>The smallest value is will be on the left-most node, therefore the first thing to do is to dive to the deepest ad left-most of the tree. Next we can return the value of the middle node, then its left node. A list of nodes on path should be maintain to avoid return repeated value.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">BSTIterator</span><span class="p">:</span>
</span><span class='line'>    <span class="c"># @param root, a binary search tree&#39;s root node</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
</span><span class='line'>        <span class="c"># ancestors of current node, </span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">ancestors</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># current node, initialized by root</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># current point to the  smallest value</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="n">root</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">dive</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># @return a boolean, whether we have a next smallest number</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">hasNext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">!=</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">hasLeft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasNext</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">hasRight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasNext</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># @return an integer, the next smallest number</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="c"># every time we dive first,</span>
</span><span class='line'>        <span class="c"># so the smallest value is the current node</span>
</span><span class='line'>        <span class="n">rval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">val</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasRight</span><span class="p">():</span>
</span><span class='line'>            <span class="c"># if no right nodes</span>
</span><span class='line'>            <span class="c"># the next smallest value will be current node&#39;s parent</span>
</span><span class='line'>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ancestors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancestors</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="c"># if there is right node,  it&#39;s value will smaller than parent&#39;s, </span>
</span><span class='line'>            <span class="c"># so step into it, then dive to left-most</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">right</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">dive</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">rval</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">dive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasLeft</span><span class="p">():</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">ancestors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="p">)</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">left</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>Excel column number</h3>

<h5>Qusetion</h5>

<p>Given Excel column number, return the corresponding digit number</p>

<h5>Basic logic</h5>

<p>A conversion of number systems( thought not a typical one) . First we map characters to numbers, them multiply digit in the <code>Nth</code> location with <code>26^n</code>, sum and get the result.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
</span><span class='line'>    <span class="c"># @param s, a string</span>
</span><span class='line'>    <span class="c"># @return an integer</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span><span class="s">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">titleToNumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
</span><span class='line'>        <span class="n">rval</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)):</span>
</span><span class='line'>            <span class="c"># need to revese the string</span>
</span><span class='line'>            <span class="n">rval</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">char2Int</span><span class="p">(</span><span class="n">s</span><span class="p">[</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="mi">26</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">rval</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">char2Int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">char</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">char</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>Majority element</h3>

<h6>Question:</h6>

<p>Given an array of size n, find the majority element. The majority element is the element that appears more than <code>n/2</code> times.</p>

<h6>Basic logic:</h6>

<p>Use a counter(map) to calculate how many times each elements has occured and return if <code>times &gt; length/2</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
</span><span class='line'>    <span class="c"># @param num, a list of integers</span>
</span><span class='line'>    <span class="c"># @return an integer</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">majorityElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span><span class='line'>        <span class="nb">map</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>        <span class="n">length</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">num</span><span class="p">:</span>
</span><span class='line'>            <span class="k">try</span><span class="p">:</span>
</span><span class='line'>                <span class="nb">map</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>            <span class="k">except</span><span class="p">:</span>
</span><span class='line'>                <span class="nb">map</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>            <span class="k">if</span> <span class="nb">map</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">length</span><span class="o">/</span><span class="mi">2</span><span class="p">:</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">n</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>Trailing zeros.</h3>

<h5>Question:</h5>

<p>Given an integer n, return the number of trailing zeroes in n!.</p>

<h5>Basic logics:</h5>

<p>This is more a math problem than a code problem. Notice that <code>1 x 2 x 3 ... x 5 ... x 10 ...</code> with every <code>5</code>( or <code>n x 5</code> ) there must be a <code>2</code>(or<code>nx2</code>). And the trailing zeros must be the result of <code>(2x5)^n</code>. Therefore, the problem becomes &lsquo;How many 5 are there in it&rsquo;s factors&rsquo;. ( Need to rewrite this paragraph )</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
</span><span class='line'>    <span class="c"># @return an integer</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">trailingZeroes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span class='line'>        <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>        <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>        <span class="k">while</span> <span class="mi">5</span><span class="o">**</span><span class="n">k</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
</span><span class='line'>            <span class="n">num</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="p">(</span><span class="mi">5</span><span class="o">**</span><span class="n">k</span><span class="p">))</span>
</span><span class='line'>            <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">num</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<hr />

<h3>Find peak elements</h3>

<h6>Questions</h6>

<p>Given an input array where num[i]  num[i+1], find a peak element and return its index.</p>

<h6>Basic logic</h6>

<p>Easy problem, just iter over and compare each element with its neighbours. If the num[i] can equals num[i+], we first deduplicate, and then compare. Need some attentions on the conner case( length = 0,1 or the peak occurs on the head or tails)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
</span><span class='line'>    <span class="c"># @param num, a list of integer</span>
</span><span class='line'>    <span class="c"># @return an integer</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">findMin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">num</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">num</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="c"># deduplicate</span>
</span><span class='line'>            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">num</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span class='line'>                <span class="n">num</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">num</span><span class="p">)):</span>
</span><span class='line'>                <span class="k">try</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">if</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]:</span>
</span><span class='line'>                        <span class="n">num</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>                <span class="k">except</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">break</span>
</span><span class='line'>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">findMinNoRepeat</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">findMinNoRepeat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">num</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">num</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">buf</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>            <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>            <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
</span><span class='line'>                <span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span><span class='line'>                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>            <span class="n">index</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class='line'>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isMax</span><span class="p">(</span><span class="n">buf</span><span class="p">):</span>
</span><span class='line'>                    <span class="k">return</span> <span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>                    <span class="n">index</span> <span class="o">%=</span> <span class="n">length</span>
</span><span class='line'>                    <span class="k">if</span> <span class="n">num</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">!=</span> <span class="n">buf</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span class='line'>                        <span class="n">buf</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'>                        <span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">isMax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buf</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;</span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">buf</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">&gt;</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>Min Stack</h3>

<h5>question</h5>

<p>Design a stack that supports push, pop, top, and retrieving the minimum element in constant time.</p>

<pre><code>* push(x) -- Push element x onto stack.
* pop() -- Removes the element on top of the stack.
* top() -- Get the top element.
* getMin() -- Retrieve the minimum element in the stack.
</code></pre>

<h5>Basic logic</h5>

<p>The key is to maintain double stack: one for normal push() and pop(), the other for the operation getMin(). When a new min value is pushed, we also push it to the min_stack, when it pops, we also pop it from min_stack. So the minimum value is always on the top of min_stack.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">MinStack</span><span class="p">:</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">minStack</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># @param x, an integer</span>
</span><span class='line'>    <span class="c"># @return an integer</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minStack</span> <span class="o">==</span> <span class="p">[]</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minStack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">minStack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># @return nothing</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">minStack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">minStack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># @return an integer</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">top</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># @return an integer</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">getMin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">minStack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>Fraction to Recurring Decimal</h3>

<h5>Question</h5>

<h5>Basic logics.</h5>

<p>Easy job, just a little bit tedious. By implementing a long divide, we can easily find the answer. Remember to store every ( quotientremainder )pairs so that we can know when it starts repeat itself. The python test case is wrong. See <a href="https://leetcode.com/discuss/28804/result-of-test-case-1-214748364-should-be-repeating-decimal">this post</a>. After this solution, I turned to C++, which should have better judge system.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Solution</span><span class="p">():</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">pass</span>
</span><span class='line'>    <span class="c"># @return a string</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">fractionToDecimal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">):</span>
</span><span class='line'>        <span class="c"># corner case</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">numerator</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="s">&#39;0&#39;</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># if no decimal number</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">numerator</span> <span class="o">%</span> <span class="n">denominator</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span> <span class="n">numerator</span><span class="o">/</span><span class="n">denominator</span> <span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="c"># reduction of a fraction, not necessary</span>
</span><span class='line'>            <span class="n">fraction</span> <span class="o">=</span> <span class="mi">2</span>
</span><span class='line'>            <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class='line'>                <span class="k">while</span> <span class="n">fraction</span> <span class="o">&lt;=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">numerator</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">denominator</span><span class="p">)</span> <span class="p">):</span>
</span><span class='line'>                    <span class="k">if</span> <span class="n">numerator</span> <span class="o">%</span> <span class="n">fraction</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">denominator</span> <span class="o">%</span> <span class="n">fraction</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                        <span class="n">numerator</span> <span class="o">/=</span> <span class="n">fraction</span>
</span><span class='line'>                        <span class="n">denominator</span> <span class="o">/=</span> <span class="n">fraction</span>
</span><span class='line'>                        <span class="k">break</span>
</span><span class='line'>                    <span class="n">fraction</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>                <span class="c"># if it&#39;s end, end it. else ,restart again</span>
</span><span class='line'>                <span class="k">if</span> <span class="n">fraction</span> <span class="o">&gt;=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">numerator</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">denominator</span><span class="p">)</span> <span class="p">):</span>
</span><span class='line'>                    <span class="k">break</span>
</span><span class='line'>                <span class="n">fraction</span> <span class="o">=</span> <span class="mi">2</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># Decomposition quality factor to find if demimal repeated itself, not necessary.</span>
</span><span class='line'>            <span class="n">denom</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">denominator</span><span class="p">)</span>
</span><span class='line'>            <span class="k">while</span> <span class="n">denom</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">denom</span> <span class="o">/=</span> <span class="mi">2</span>
</span><span class='line'>            <span class="k">while</span> <span class="n">denom</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">denom</span> <span class="o">/=</span><span class="mi">5</span>
</span><span class='line'>            <span class="n">repeated</span> <span class="o">=</span> <span class="n">denom</span> <span class="o">!=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">result_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>            <span class="c"># get the symbol of final result</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">numerator</span><span class="o">*</span><span class="n">denominator</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                <span class="n">result_list</span> <span class="o">+=</span> <span class="p">[(</span><span class="s">&#39;-&#39;</span><span class="p">,</span><span class="s">&#39;-&#39;</span><span class="p">)]</span>
</span><span class='line'>            <span class="n">numerator</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">numerator</span><span class="p">)</span>
</span><span class='line'>            <span class="n">denominator</span> <span class="o">=</span> <span class="nb">abs</span> <span class="p">(</span><span class="n">denominator</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># start long divide loop( core algo )</span>
</span><span class='line'>            <span class="n">add_dot</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>            <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>            <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class='line'>                <span class="c"># long divide</span>
</span><span class='line'>                <span class="n">quotient</span> <span class="o">=</span> <span class="n">numerator</span> <span class="o">/</span> <span class="n">denominator</span>
</span><span class='line'>                <span class="n">remainder</span> <span class="o">=</span> <span class="n">numerator</span> <span class="o">%</span> <span class="n">denominator</span>
</span><span class='line'>                <span class="n">numerator</span> <span class="o">=</span> <span class="n">remainder</span>
</span><span class='line'>
</span><span class='line'>                <span class="c"># check if repreated, if not, ready for the next division</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="n">remainder</span><span class="p">,</span> <span class="n">quotient</span><span class="p">)</span> <span class="ow">in</span> <span class="n">result_list</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">repreat_start_locaation</span> <span class="o">=</span> <span class="n">result_list</span><span class="o">.</span><span class="n">index</span><span class="p">((</span><span class="n">remainder</span><span class="p">,</span> <span class="n">quotient</span><span class="p">))</span>
</span><span class='line'>                    <span class="n">result_list</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span> <span class="n">repreat_start_locaation</span><span class="p">,</span> <span class="p">(</span> <span class="s">&#39;(&#39;</span><span class="p">,</span> <span class="s">&#39;(&#39;</span> <span class="p">)</span> <span class="p">)</span>
</span><span class='line'>                    <span class="n">result_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span> <span class="s">&#39;)&#39;</span> <span class="p">,</span> <span class="s">&#39;)&#39;</span> <span class="p">)</span> <span class="p">)</span>
</span><span class='line'>                    <span class="k">break</span>
</span><span class='line'>
</span><span class='line'>                <span class="c"># append this result of division</span>
</span><span class='line'>                <span class="n">result_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span><span class="n">remainder</span><span class="p">,</span> <span class="n">quotient</span><span class="p">)</span> <span class="p">)</span>
</span><span class='line'>                <span class="c"># if remainder is 0, it&#39;s not a repreated number                    </span>
</span><span class='line'>                <span class="k">if</span> <span class="n">remainder</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">break</span>
</span><span class='line'>                <span class="k">if</span> <span class="n">add_dot</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">result_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">,</span><span class="s">&#39;.&#39;</span><span class="p">)</span> <span class="p">)</span>
</span><span class='line'>                    <span class="n">add_dot</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>                <span class="n">numerator</span> <span class="o">*=</span> <span class="mi">10</span>
</span><span class='line'>
</span><span class='line'>                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>                <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">break</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>            <span class="c"># construck result</span>
</span><span class='line'>            <span class="n">result_list</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
</span><span class='line'>            <span class="n">result_str</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</span><span class='line'>            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">result_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                <span class="n">remainder</span><span class="p">,</span> <span class="n">quotient</span> <span class="o">=</span> <span class="n">result_list</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span class='line'>                <span class="n">result_str</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">quotient</span><span class="p">)</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">result_str</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[GSoC2015_blog_test]]></title>
    <link href="http://chienlima.github.io/blog/2015/03/27/gsoc2015-blog-test/"/>
    <updated>2015-03-27T12:52:17+08:00</updated>
    <id>http://chienlima.github.io/blog/2015/03/27/gsoc2015-blog-test</id>
    <content type="html"><![CDATA[<p>Just a post to test if catagory and rss feed works well.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Leetcode Battlefield: largestNum (and TDD?)]]></title>
    <link href="http://chienlima.github.io/blog/2015/03/12/largest-number-and-tdd/"/>
    <updated>2015-03-12T17:38:50+08:00</updated>
    <id>http://chienlima.github.io/blog/2015/03/12/largest-number-and-tdd</id>
    <content type="html"><![CDATA[<p>Today I solve another problem on leetcode, the process of solving this issue just like the old saying: , which means people spared a lot of efforts on a problem but it was solved in a unexpected simple way.</p>

<p>Ok, let&rsquo;s talk about the problem:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  Given a list of non negative integers, arrange them such that they form the largest number.
</span><span class='line'>  
</span><span class='line'>  For example, given [3, 30, 34, 5, 9], the largest formed number is 9534330.
</span><span class='line'>  
</span><span class='line'>  Note: The result may be very large, so you need to return a string instead of an integer.</span></code></pre></td></tr></table></div></figure>


<p>So the first thing I need to do is transfer integers into strings, which will help in the following comparasion. Next, I sorted the numbers based on their first digits because obsiviousl, <code>9**</code> is greater than <code>1**</code>. Aftr that, I extracted numbers with same first digits and do the comparation.</p>

<p>In the comparation, those numbers will be combine to form the biggest number they can. This is the most important part. At first, I wrote a complicated algorithm which did comparasion using  <code>a[:length] &gt; b[:length]</code>, and lots of code handle conner case &ndash; one of the number is longger. The code went really long like</p>

<p>This code went well expect for the test cases like <code>[8308, 830]</code> or <code>[101,10]</code>: No matter how I compared thoes numbers, they are &lsquo;equal&rsquo;. But when I combined them with different order, the result differed. I spent a long time trying to figure<code>(playing)</code> a<code>(3ds)</code> method<code>(game)</code>. Suddenly, I came out with a idea: &ldquo;why not do the comparision by combine digits in different order and see which result is larger?&rdquo;. It Works, and the final algorithm became really simple:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
</span><span class='line'>    <span class="c"># @param num, a list of integers</span>
</span><span class='line'>    <span class="c"># @return a string</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">largestNumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
</span><span class='line'>        <span class="n">num</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">num</span> <span class="p">]</span>
</span><span class='line'>        <span class="c"># sort by the first digit </span>
</span><span class='line'>        <span class="n">sorted_num</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">reverse</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># for number with same &#39;first number&#39;, combine them to get biggest</span>
</span><span class='line'>        <span class="n">result</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span class='line'>            <span class="n">i</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span class='line'>            <span class="n">num_group</span> <span class="o">=</span> <span class="p">[</span> <span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">sorted_num</span> <span class="k">if</span> <span class="n">num</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span>
</span><span class='line'>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">num_group</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                <span class="n">result</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxNum</span><span class="p">(</span> <span class="n">num_group</span> <span class="p">)</span>
</span><span class='line'>        <span class="c"># check if number is zero</span>
</span><span class='line'>        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="n">result</span> <span class="o">=</span> <span class="s">&#39;0&#39;</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">result</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">maxNum</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">nums</span> <span class="p">):</span>
</span><span class='line'>        <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">        Given numbers(list of string) with same first digits, </span>
</span><span class='line'><span class="sd">        combine them to get max number(string).</span>
</span><span class='line'><span class="sd">        &quot;&quot;&quot;</span>
</span><span class='line'>        <span class="n">result</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</span><span class='line'>        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>            <span class="c"># init a winner and its index</span>
</span><span class='line'>            <span class="n">win</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>            <span class="n">win_index</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>            <span class="n">win_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">win</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># find a num, if added to result, yield biggest number</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)):</span>
</span><span class='line'>                <span class="n">num</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span class='line'>                <span class="n">result1</span> <span class="o">=</span> <span class="n">win</span> <span class="o">+</span> <span class="n">num</span>
</span><span class='line'>                <span class="n">result2</span> <span class="o">=</span> <span class="n">num</span> <span class="o">+</span> <span class="n">win</span>
</span><span class='line'>                <span class="k">if</span> <span class="n">result1</span><span class="o">&gt;</span><span class="n">result2</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">num_win</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">num_win</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'>
</span><span class='line'>                <span class="k">if</span> <span class="n">num_win</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">win</span> <span class="o">=</span> <span class="n">num</span>
</span><span class='line'>                    <span class="n">win_index</span> <span class="o">=</span> <span class="n">index</span>
</span><span class='line'>                    <span class="n">win_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>            <span class="c"># append the winner to the result</span>
</span><span class='line'>            <span class="n">result</span> <span class="o">+=</span> <span class="n">nums</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">win_index</span><span class="p">)</span>
</span><span class='line'>        <span class="c"># append the last number</span>
</span><span class='line'>        <span class="n">result</span> <span class="o">+=</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">result</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>About TDD:</h3>

<p>In Last day&rsquo;s interview, I was asked about my idea of TDD(Test Drive Development), I just answered:&ldquo;I think it is usual, I wrote test for my codes.&rdquo;, which equals to answered nothing. These two days I developed leetcode&rsquo;s answer with the help of OnlineJudge&rsquo;s test cases, I did realise that writing test cases norishes a developer.</p>

<p>Every time programmers write teststhey try covering every special cases they know therefore codes pass their own tests are their best products within their ability. But when things come to production, codes will prossibly encouter cases that make it fail, which, just like a hole in developer&rsquo;s mind. Every time developer find such a case, it find a hole in his mind he never knows, then he fixes it. Day after dats, after millions of holes are fix, his mind hardly has hole. Therefore, his products, his codes, will become unbelievably stable.</p>

<p>That&rsquo;s my understand of TDD &ndash; Test Drive Developer.</p>

<p>Just for fun, don&rsquo;t take it seriously. :)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Leetcode Battle Field and ]]></title>
    <link href="http://chienlima.github.io/blog/2015/03/11/day2015-dot-3-10/"/>
    <updated>2015-03-11T21:23:03+08:00</updated>
    <id>http://chienlima.github.io/blog/2015/03/11/day2015-dot-3-10</id>
    <content type="html"><![CDATA[<p>  (=T_T=)</p>

<p>HTTPsocketthreadprocessAPI</p>

<p>Bosslabel&#8221;python ,</p>

<p>:</p>

<ul>
<li>APIAPI</li>
<li></li>
</ul>


<hr />

<h3>LeetCode Battle Field:</h3>

<p>leetcodeleetcodehackerrankblog<code>leetcode battle field</code>flag</p>

<p>:</p>

<p>  Say you have an array for which the ith element is the price of a given stock on day i.Design an algorithm to find the maximum profit. You may complete at most k transactions.</p>

<p><code>prices</code><code>k</code></p>

<p>
sort<code>k</code></p>

<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='Python'><span class='line'><span class="k">class</span> <span class="nc">Stock</span><span class="p">():</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buy_date</span><span class="p">,</span> <span class="n">buy_price</span><span class="p">,</span> <span class="n">sale_date</span><span class="p">,</span> <span class="n">sale_price</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">buy_price</span> <span class="o">=</span> <span class="n">buy_price</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">buy_date</span> <span class="o">=</span> <span class="n">buy_date</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">sale_price</span> <span class="o">=</span> <span class="n">sale_price</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">sale_date</span> <span class="o">=</span> <span class="n">sale_date</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">profit</span> <span class="o">=</span> <span class="n">sale_price</span> <span class="o">-</span> <span class="n">buy_price</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span>  <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span>  <span class="nb">str</span><span class="p">({</span>
</span><span class='line'>        <span class="s">&#39;buy_price&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">buy_price</span> <span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;buy_date&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">buy_date</span> <span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;sale_price&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sale_price</span><span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;sale_date&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sale_date</span> <span class="p">,</span>
</span><span class='line'>        <span class="s">&#39;profit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">profit</span> <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>class</p>

<ol>
<li></li>
<li></li>
</ol>


<p> 1 2 <code>depthk</code></p>

<ol>
<li><code>N</code></li>
<li><code>N-1</code></li>
<li><code>N1</code></li>
<li><code>N-1</code> 1 max</li>
</ol>


<p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
</pre></td><td class='code'><pre><code class='Python'><span class='line'><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
</span><span class='line'>    <span class="c"># @return an integer as the maximum profit </span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">have</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">profits</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">possibleStocks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">prices</span><span class="p">):</span>
</span><span class='line'>      <span class="sd">&quot;&quot;&quot;get all possible stocks</span>
</span><span class='line'><span class="sd">      &quot;&quot;&quot;</span>
</span><span class='line'>        <span class="c"># get all possible operate point</span>
</span><span class='line'>        <span class="n">buy_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>        <span class="n">sale_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>        <span class="c"># conner case</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">prices</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span class='line'>            <span class="n">buy_points</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">prices</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">prices</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]:</span>
</span><span class='line'>            <span class="n">sale_points</span> <span class="o">+=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>        <span class="c"># general case</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">prices</span><span class="p">[</span><span class="n">date</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">prices</span><span class="p">[</span><span class="n">date</span><span class="p">]</span> <span class="ow">and</span>\
</span><span class='line'>                <span class="n">prices</span><span class="p">[</span><span class="n">date</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">prices</span><span class="p">[</span><span class="n">date</span><span class="p">]:</span>
</span><span class='line'>                <span class="n">sale_points</span> <span class="o">+=</span> <span class="p">[</span> <span class="n">date</span> <span class="p">]</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">if</span> <span class="n">prices</span><span class="p">[</span><span class="n">date</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">prices</span><span class="p">[</span><span class="n">date</span><span class="p">]</span> <span class="ow">and</span>\
</span><span class='line'>                <span class="n">prices</span><span class="p">[</span><span class="n">date</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">prices</span><span class="p">[</span><span class="n">date</span><span class="p">]:</span>
</span><span class='line'>                <span class="n">buy_points</span> <span class="o">+=</span> <span class="p">[</span> <span class="n">date</span> <span class="p">]</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>        <span class="c"># get all possible stock</span>
</span><span class='line'>        <span class="n">stocks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">buy_point</span> <span class="ow">in</span> <span class="n">buy_points</span><span class="p">:</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">sale_point</span> <span class="ow">in</span> <span class="n">sale_points</span><span class="p">:</span>
</span><span class='line'>                <span class="k">if</span> <span class="n">buy_point</span> <span class="o">&gt;</span> <span class="n">sale_point</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">break</span>
</span><span class='line'>                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">b_d</span> <span class="o">=</span> <span class="n">buy_point</span>
</span><span class='line'>                    <span class="n">s_d</span> <span class="o">=</span> <span class="n">sale_point</span>
</span><span class='line'>                    <span class="n">b_p</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">buy_point</span><span class="p">]</span>
</span><span class='line'>                    <span class="n">s_p</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">sale_point</span><span class="p">]</span>
</span><span class='line'>                    <span class="c"># stocks should earn money</span>
</span><span class='line'>                    <span class="k">if</span> <span class="n">s_p</span> <span class="o">&gt;</span> <span class="n">b_p</span><span class="p">:</span>
</span><span class='line'>                        <span class="n">stocks</span> <span class="o">+=</span> <span class="p">[</span> <span class="n">Stock</span><span class="p">(</span><span class="n">b_d</span><span class="p">,</span> <span class="n">b_p</span><span class="p">,</span> <span class="n">s_d</span><span class="p">,</span> <span class="n">s_p</span><span class="p">)</span> <span class="p">]</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">stocks</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">findMaxProfit</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="n">stocks</span><span class="p">,</span> <span class="n">earliest_time</span> <span class="p">):</span>
</span><span class='line'>      <span class="sd">&quot;&quot;&quot;  </span>
</span><span class='line'><span class="sd">      Given possible stocks, operation tims and earliest </span>
</span><span class='line'><span class="sd">      operating time, get max profits</span>
</span><span class='line'><span class="sd">      &quot;&quot;&quot;</span>
</span><span class='line'>        <span class="c"># remain stocks could not be bought before last stock saled</span>
</span><span class='line'>        <span class="n">stocks</span> <span class="o">=</span> <span class="p">[</span><span class="n">stock</span> <span class="k">for</span> <span class="n">stock</span> <span class="ow">in</span> <span class="n">stocks</span> <span class="k">if</span> <span class="n">stock</span><span class="o">.</span><span class="n">buy_date</span> <span class="o">&gt;=</span> <span class="n">earliest_time</span> <span class="p">]</span>
</span><span class='line'>        <span class="c"># if no stock fulfill reuqirement reutrn0</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">stocks</span> <span class="o">==</span> <span class="p">[]:</span>
</span><span class='line'>            <span class="k">return</span> <span class="mi">0</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">operation</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c"># if only 1 operation left, choose max profit</span>
</span><span class='line'>            <span class="k">return</span> <span class="nb">max</span><span class="p">([</span> <span class="n">stock</span><span class="o">.</span><span class="n">profit</span> <span class="k">for</span> <span class="n">stock</span> <span class="ow">in</span> <span class="n">stocks</span> <span class="p">])</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span> <span class="c">#  N1  N </span>
</span><span class='line'>            <span class="n">operation</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class='line'>            <span class="n">possible_profits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">stocks</span><span class="p">)):</span>
</span><span class='line'>                <span class="n">left_stocks</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">stocks</span><span class="p">)</span>
</span><span class='line'>                <span class="n">left_stocks</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span class='line'>                <span class="n">possible_profits</span> <span class="o">+=</span> \
</span><span class='line'>                    <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">findMaxProfit</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">left_stocks</span><span class="p">,</span> <span class="n">stocks</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">sale_date</span><span class="p">)</span> <span class="o">+</span> <span class="n">stock</span><span class="o">.</span><span class="n">profit</span><span class="p">]</span>
</span><span class='line'>            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span> <span class="n">possible_profits</span> <span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">maxProfit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">prices</span><span class="p">):</span>
</span><span class='line'>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="mi">0</span>
</span><span class='line'>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span class='line'>            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
</span><span class='line'>        <span class="n">stocks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">possibleStocks</span><span class="p">(</span> <span class="n">k</span><span class="p">,</span> <span class="n">prices</span> <span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">findMaxProfit</span><span class="p">(</span> <span class="n">k</span><span class="p">,</span> <span class="n">stocks</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>conner case<code>List.index()</code>Python.<code>Stock</code><code>buy()</code><code>sale()</code>POSTmark</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[.]]></title>
    <link href="http://chienlima.github.io/blog/2015/03/06/learn-or-not/"/>
    <updated>2015-03-06T18:43:00+08:00</updated>
    <id>http://chienlima.github.io/blog/2015/03/06/learn-or-not</id>
    <content type="html"><![CDATA[<p></p>

<p></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1. 
</span><span class='line'>2. ajaxTCP/IP?</span></code></pre></td></tr></table></div></figure>


<p>So</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1.
</span><span class='line'>  
</span><span class='line'>2.
</span><span class='line'>  
</span><span class='line'>3.
</span><span class='line'>  </span></code></pre></td></tr></table></div></figure>


<p></p>

<p>trickrubyblockruby</p>

<p></p>

<p>ScrapysignalcallbackAPI</p>

<p></p>

<p></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>1.
</span><span class='line'>  
</span><span class='line'>2.
</span><span class='line'>  
</span><span class='line'>3.
</span><span class='line'>  
</span><span class='line'>4.
</span><span class='line'>  </span></code></pre></td></tr></table></div></figure>


<p></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'></span></code></pre></td></tr></table></div></figure>


<p>SB  (= =||</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Have a Try on Octopress]]></title>
    <link href="http://chienlima.github.io/blog/2015/01/16/have-a-try-on-octopress/"/>
    <updated>2015-01-16T23:20:53+08:00</updated>
    <id>http://chienlima.github.io/blog/2015/01/16/have-a-try-on-octopress</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve always want a English technical blog. i&rsquo;ve tried wordpress, which is far from satisfying to inserting code.</p>

<p>Now, I have a try on octopress. Hope it work well~</p>
]]></content>
  </entry>
  
</feed>
